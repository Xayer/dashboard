(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{520:function(t,e,r){var content=r(535);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("08d0f8dc",content,!0,{sourceMap:!1})},534:function(t,e,r){"use strict";r(520)},535:function(t,e,r){var n=r(15)(!1);n.push([t.i,"section.tracks>.card{display:flex;justify-content:flex-start;align-items:center;grid-gap:var(--padding);gap:var(--padding);padding:calc(var(--padding)/2)}section.tracks>.card a{color:var(--text-color)}section.tracks>.card .title{font-size:1.25rem}section.tracks>.card .artists{display:flex;grid-gap:calc(var(--padding)/4);gap:calc(var(--padding)/4)}.setting-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:var(--padding)}.on{color:var(--accent-success)}.off{color:var(--accent-danger)}",""]),t.exports=n},550:function(t,e,r){"use strict";r.r(e);r(34);var n=r(5),c=r(10),o=r(26),l=r(12),f=r(13),d=r(6),m=r(7),v=(r(51),r(20),r(8)),h=r(43),y=r(11),k=r(56);function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(d.a)(t);if(e){var c=Object(d.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(f.a)(this,r)}}var S=function(t,e,r,desc){var n,c=arguments.length,o=c<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(o=(c<3?n(o):c>3?n(e,r,o):n(e,r))||o);return c>3&&o&&Object.defineProperty(e,r,o),o},O=function(t){Object(l.a)(f,t);var e,r=_(f);function f(){var t;return Object(c.a)(this,f),(t=r.apply(this,arguments)).head={title:"Spotify Settings"},t.topTracks=[],t.timeRange="medium_term",t.timeRanges=[{text:"4 weeks",value:"short_term"},{text:"6 months",value:"medium_term"},{text:"several years",value:"long_term"}],t}return Object(o.a)(f,[{key:"authUrl",get:function(){return h.a}},{key:"integrationActive",get:function(){return!0===JSON.parse(localStorage.getItem(h.e)||"false")}},{key:"clearSpotifyIntegration",value:function(){localStorage.removeItem(h.h),localStorage.removeItem(h.e),this.$store.dispatch("userSettings/loadExistingSettings"),this.fetchTopTracks()}},{key:"fetchTopTracks",value:(e=Object(n.a)(regeneratorRuntime.mark((function t(){var e,r,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;break;case 2:if(e=localStorage.getItem(h.h),this.integrationActive){t.next=11;break}if(!this.$route.query.code){t.next=11;break}if(e&&"undefined"!==e){t.next=11;break}return t.next=8,Object(h.b)(this.$route.query.code);case 8:(r=t.sent).error?(localStorage.removeItem(h.h),localStorage.removeItem(h.e)):(localStorage.setItem(h.h,JSON.stringify(r.refresh_token)),localStorage.setItem(h.e,JSON.stringify(!0))),e=localStorage.getItem(h.h);case 11:if(!e){t.next=14;break}return t.next=14,Object(h.d)(this.timeRange).then((function(t){n.topTracks=t.items,localStorage.setItem(h.e,JSON.stringify(!0))})).catch((function(){localStorage.setItem(h.e,JSON.stringify(!1))}));case 14:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"mounted",value:function(){this.fetchTopTracks()}}]),f}(v.Vue);S([Object(v.Watch)("integrationActive"),Object(v.Watch)("timeRange")],O.prototype,"fetchTopTracks",null);var x=O=S([Object(v.Component)({components:{Select:y.Select,Button:y.Button,Card:k.Card,CardCollection:k.CardCollection}})],O),j=(r(534),r(2)),component=Object(j.a)(x,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"setting-header"},[r("h3",{staticClass:"m-b"},[t._v("\n      Spotify "),r("b",{class:[t.integrationActive?"on":"off"]},[t._v("O")])]),t._v(" "),r("div",[t.integrationActive||t.$route.query.code?t._e():r("a",{attrs:{href:t.authUrl}},[t._v("Authenticate with Spotify")]),t._v(" "),r("Select",{attrs:{options:t.timeRanges},model:{value:t.timeRange,callback:function(e){t.timeRange=e},expression:"timeRange"}}),t._v(" "),r("Button",{staticClass:"m-l danger",on:{click:t.clearSpotifyIntegration}},[t._v("X")])],1)]),t._v(" "),t.topTracks?r("CardCollection",{staticClass:"tracks"},t._l(t.topTracks,(function(e,n){return r("Card",{key:e.id,scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n        "+t._s(n+1)+"\n      ")]},proxy:!0}],null,!0)},[t._v(" "),e.album.images?r("img",{attrs:{src:e.album.images[2].url,alt:e.name+" - "+e.artists.map((function(t){return t.name})).join(", "),width:e.album.images[2].width,height:e.album.images[2].height}}):t._e(),t._v(" "),r("div",{staticClass:"titles"},[r("a",{staticClass:"title",attrs:{href:e.href}},[t._v(t._s(e.name))]),t._v(" "),r("div",{staticClass:"artists"},t._l(e.artists,(function(e){return r("a",{key:e.id,attrs:{href:e.href}},[t._v(t._s(e.name))])})),0)])])})),1):t._e()],1)}),[],!1,null,null,null);e.default=component.exports}}]);