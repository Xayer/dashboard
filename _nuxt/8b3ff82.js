(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{543:function(t,e,r){"use strict";r.r(e);r(34),r(32),r(41),r(36),r(50);var n=r(54),o=r(18),c=r(5),d=r(10),l=r(26),f=r(12),h=r(13),y=r(6),O=r(7),v=(r(51),r(20),r(33),r(71),r(88),r(96),r(37),r(8)),j=r(70),m=r(11),D=r(56),w=r(189),k=r(116);function B(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(y.a)(t);if(e){var o=Object(y.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var x=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(O.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c},R=function(t){Object(f.a)(y,t);var e,r,h=S(y);function y(){var t;return Object(d.a)(this,y),(t=h.apply(this,arguments)).head={title:"Dashboards"},t.defaultSettings=j.b,t.DashboardWidgets=null,t.currentBoard=null,t}return Object(l.a)(y,[{key:"boards",get:function(){return this.$store.getters["userSettings/boards"]}},{key:"gistId",get:function(){return this.$route.query.gist}},{key:"boardId",get:function(){return this.$route.query.id}},{key:"fetchBoard",value:(r=Object(c.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.boardId){t.next=6;break}if((e=this.boardId)||this.boards[e]){t.next=4;break}return t.abrupt("return",null);case 4:return this.currentBoard=this.boards[e],t.abrupt("return");case 6:if(!this.gistId){t.next=11;break}return t.next=9,this.fetchDashboardWidgetsFromGist(this.gistId);case 9:return this.currentBoard=t.sent,t.abrupt("return");case 11:this.currentBoard=null;case 12:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"mounted",value:function(){this.$store.dispatch("userSettings/loadExistingSettings"),this.fetchBoard()}},{key:"loadWidgetsBasedOnId",value:function(t){if(!t)return[];this.DashboardWidgets=this.getDashboardWidgets(null==t?void 0:t.widgets)}},{key:"fetchDashboardWidgetsFromGist",value:(e=Object(c.a)(regeneratorRuntime.mark((function t(e){var r,n,o,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.b)(e);case 2:if(o=t.sent,(c=o.files)&&(null===(r=c["dashboard.json"])||void 0===r?void 0:r.content)){t.next=6;break}return t.abrupt("return",null);case 6:return t.next=8,JSON.parse(null===(n=c["dashboard.json"])||void 0===n?void 0:n.content);case 8:return d=t.sent,t.abrupt("return",{widgets:d.widgets,guid:d.guid,name:d.name});case 10:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"getDashboardWidgets",value:function(t){if(t)return JSON.parse(JSON.stringify(t)).map((function(t){var e=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?B(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):B(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t);return t.guid||(e.guid=(new Date).toUTCString()),e}))}},{key:"editDashboard",value:function(){this.$router.push({path:"/dashboards/edit",query:{id:this.$route.query.id}})}},{key:"getWidget",value:function(t){return this.$options.components&&Object.keys(this.$options.components).includes(t)?t:"Placeholder"}},{key:"createNewDashboard",value:function(){this.$store.commit("userSettings/CREATE_NEW_DASHBOARD"),this.$store.dispatch("userSettings/loadExistingSettings")}},{key:"updateDashboardName",value:function(t){var e=t.name,r=t.index,o=t.guid,c=JSON.parse(JSON.stringify(Object(n.a)(this.boards)));c[r].name=e,o&&Object(k.g)(c[r],o,e),localStorage.setItem(j.a,JSON.stringify(c)),this.$store.dispatch("userSettings/loadExistingSettings")}}]),y}(v.Vue);x([Object(v.Watch)("gistId"),Object(v.Watch)("boardId")],R.prototype,"fetchBoard",null),x([Object(v.Watch)("currentBoard")],R.prototype,"loadWidgetsBasedOnId",null);var $=R=x([Object(v.Component)({components:{Button:m.Button,DashboardList:w.DashboardList,Card:D.Card,CardCollection:D.CardCollection,DashboardViewer:w.DashboardViewer}})],R),W=r(2),component=Object(W.a)($,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.$route.query.id||t.$route.query.gist?r("div",[r("client-only",[t.$route.query.id?r("portal",{attrs:{to:"page-actions"}},[r("Button",{staticClass:"primary m-b",on:{click:t.editDashboard}},[t._v("Edit")])],1):t._e(),t._v(" "),t.currentBoard?r("DashboardViewer",{attrs:{"dashboard-widgets":t.DashboardWidgets,name:t.currentBoard.name}}):r("portal",{attrs:{to:"page-title"}},[t._v("Board not found :(")])],1)],1):r("div",[r("portal",{attrs:{to:"page-title"}},[t._v("Dashboards")]),t._v(" "),r("portal",{attrs:{to:"page-actions"}},[r("Button",{staticClass:"primary",on:{click:t.createNewDashboard}},[t._v("Create")])],1),t._v(" "),r("client-only",[r("DashboardList",{attrs:{boards:t.boards},on:{input:t.updateDashboardName}})],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);